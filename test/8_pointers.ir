# Three-Address Code (Intermediate Representation)
# ================================================

func_begin add
    t0 = a + b
    return t0
func_end add

func_begin main
    x = 10
    y = 20
    f = 3.14
    c = 'A'
    t1 = &x
    ptr1 = t1
    t2 = &y
    ptr2 = t2
    t3 = &f
    fptr = t3
    t4 = &c
    cptr = t4
    t5 = *ptr1
    value1 = t5
    *ptr1 = 30
    t6 = *ptr1
    param "x = %d, *ptr1 = %d\n"
    t7 = x
    param t7
    param t6
    t8 = call printf, 3
    arr[0] = 1
    arr[1] = 2
    arr[2] = 3
    arr[3] = 4
    arr[4] = 5
    arr[5] = 6
    arr[6] = 7
    arr[7] = 8
    arr[8] = 9
    arr[9] = 10
    aptr = arr
    t9 = *aptr
    param "First element: %d\n"
    param t9
    t10 = call printf, 2
    t11 = aptr + 1
    t12 = *t11
    param "Second element: %d\n"
    param t12
    t13 = call printf, 2
    t14 = aptr[2]
    param "Third element: %d\n"
    param t14
    t15 = call printf, 2
    t16 = aptr
    t17 = aptr + 1
    aptr = t17
    t18 = *aptr
    param "After increment: %d\n"
    param t18
    t19 = call printf, 2
    t20 = aptr
    t21 = aptr - 1
    aptr = t21
    t22 = *aptr
    param "After decrement: %d\n"
    param t22
    t23 = call printf, 2
    t24 = arr + 5
    ptr3 = t24
    t25 = aptr < ptr3
    if t25 == 0 goto L0
    param "aptr points to earlier element\n"
    t26 = call printf, 1
L0:
    t27 = ptr3 - aptr
    diff = t27
    param "Difference: %d elements\n"
    t28 = diff
    param t28
    t29 = call printf, 2
    t30 = &ptr1
    pptr = t30
    t31 = *pptr
    t32 = *t31
    param "Value through double pointer: %d\n"
    param t32
    t33 = call printf, 2
    null_ptr = 0
    t34 = null_ptr == 0
    if t34 == 0 goto L1
    param "Pointer is NULL\n"
    t35 = call printf, 1
L1:
    t36 = &x
    vptr = t36
    t37 = &f
    vptr = t37
    t38 = (int *)vptr
    t39 = *t38
    val = t39
    func_ptr = add
    param 5
    param 3
    INDIRECT_CALL func_ptr 2 t40
    result = t40
    param "Function result: %d\n"
    t41 = result
    param t41
    t42 = call printf, 2
    t43 = &x
    const_ptr = t43
    t44 = &x
    ptr_const = t44
    t45 = &x
    const_both = t45
    str1 = "Hello"
    str2[0] = 'W'
    str2[1] = 'o'
    str2[2] = 'r'
    str2[3] = 'l'
    str2[4] = 'd'
    str2[5] = '\0'
    str3 = str2
    param "String: %s\n"
    t46 = str1
    param t46
    t47 = call printf, 2
    t48 = *str3
    param "Character: %c\n"
    param t48
    t49 = call printf, 2
    return 0
func_end main

