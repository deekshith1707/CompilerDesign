# Three-Address Code (Intermediate Representation)
# ================================================

func_begin add
    t0 = a + b
    return t0
func_end add

func_begin subtract
    t1 = a - b
    return t1
func_end subtract

func_begin multiply
    t2 = a * b
    return t2
func_end multiply

func_begin factorial
    t3 = n <= 1
    if t3 == 0 goto L0
    return 1
L0:
    t4 = n - 1
    param t4
    t5 = call factorial, 1
    t6 = n * t5
    return t6
func_end factorial

func_begin max
    result = a
    t7 = b > result
    if t7 == 0 goto L1
    result = b
L1:
    t8 = c > result
    if t8 == 0 goto L2
    result = c
L2:
    return result
func_end max

func_begin printMessage
    param "Value is: %d\n"
    t9 = value
    param t9
    t10 = call printf, 2
    return
func_end printMessage

func_begin main
    param 10
    param 20
    t11 = call add, 2
    result1 = t11
    param "Addition: %d\n"
    t12 = result1
    param t12
    t13 = call printf, 2
    param 50
    param 15
    t14 = call subtract, 2
    result2 = t14
    param "Subtraction: %d\n"
    t15 = result2
    param t15
    t16 = call printf, 2
    param 5
    param 6
    t17 = call multiply, 2
    result3 = t17
    param "Multiplication: %d\n"
    t18 = result3
    param t18
    t19 = call printf, 2
    x = 10
    y = 20
    t20 = x
    param t20
    t21 = y
    param t21
    t22 = call add, 2
    sum = t22
    param "Sum of x and y: %d\n"
    t23 = sum
    param t23
    t24 = call printf, 2
    t25 = x + 5
    t26 = y * 2
    param t25
    param t26
    t27 = call add, 2
    expr_result = t27
    param "Expression result: %d\n"
    t28 = expr_result
    param t28
    t29 = call printf, 2
    param 1
    param 2
    t30 = call add, 2
    param 3
    param 4
    t31 = call add, 2
    param t30
    param t31
    t32 = call add, 2
    nested = t32
    param "Nested calls: %d\n"
    t33 = nested
    param t33
    t34 = call printf, 2
    param 5
    t35 = call factorial, 1
    fact5 = t35
    param "Factorial of 5: %d\n"
    t36 = fact5
    param t36
    t37 = call printf, 2
    param 3
    t38 = call factorial, 1
    fact3 = t38
    param "Factorial of 3: %d\n"
    t39 = fact3
    param t39
    t40 = call printf, 2
    param 15
    param 25
    param 10
    t41 = call max, 3
    maximum = t41
    param "Maximum: %d\n"
    t42 = maximum
    param t42
    t43 = call printf, 2
    param 100
    param 50
    param 75
    t44 = call max, 3
    max2 = t44
    param "Maximum2: %d\n"
    t45 = max2
    param t45
    t46 = call printf, 2
    param 42
    call printMessage, 1
    t47 = result1
    param t47
    call printMessage, 1
    param 2
    param 3
    t48 = call multiply, 2
    param 10
    param 4
    t49 = call subtract, 2
    param t48
    param t49
    t50 = call add, 2
    complex = t50
    param "Complex expression: %d\n"
    t51 = complex
    param t51
    t52 = call printf, 2
    a = 5
    b = 10
    c = 15
    t53 = b
    param t53
    t54 = c
    param t54
    t55 = call multiply, 2
    t56 = a
    param t56
    param t55
    t57 = call add, 2
    result = t57
    param "a + (b * c) = %d\n"
    t58 = result
    param t58
    t59 = call printf, 2
    return 0
func_end main

