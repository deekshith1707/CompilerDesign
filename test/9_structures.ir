# Three-Address Code (Intermediate Representation)
# ================================================

func_begin main
    t0 = &p2
    *(t0 + 0) = 10
    *(t0 + 4) = 20
    t1 = CAST_struct_Point_to_int(p1)
    x = t1
    t2 = &p1
    *(t2 + 0) = 5
    t3 = &p1
    *(t3 + 4) = 15
    t4 = &p1
    t5 = *(t4 + 0)
    t6 = &p1
    t7 = *(t6 + 4)
    param "Point p1: (%d, %d)\n"
    param t5
    param t7
    t8 = call printf, 3
    t9 = &p2
    t10 = *(t9 + 0)
    t11 = &p2
    t12 = *(t11 + 4)
    param "Point p2: (%d, %d)\n"
    param t10
    param t12
    t13 = call printf, 3
    t14 = &student1
    *(t14 + 0) = 101
    t15 = &student1
    *(t15 + 4) = 3.75
    t16 = &student1
    *(t16 + 8) = 20
    t17 = &student1
    t18 = *(t17 + 0)
    t19 = &student1
    t20 = *(t19 + 4)
    t21 = &student1
    t22 = *(t21 + 8)
    param "Student ID: %d, GPA: %.2f, Age: %d\n"
    param t18
    t23 = (double)t20
    param t23
    param t22
    t24 = call printf, 4
    t25 = &p3
    t26 = &p1
    t27 = *(t26 + 0)
    *(t25 + 0) = t27
    t28 = *(t26 + 4)
    *(t25 + 4) = t28
    t29 = &p3
    *(t29 + 0) = 100
    t30 = &p1
    t31 = *(t30 + 0)
    t32 = &p3
    t33 = *(t32 + 0)
    param "Original p1.x: %d, Copy p3.x: %d\n"
    param t31
    param t33
    t34 = call printf, 3
    t35 = &p2
    ptr = t35
    *(ptr + 0) = 50
    *(ptr + 4) = 60
    t36 = &p2
    t37 = *(t36 + 0)
    t38 = &p2
    t39 = *(t38 + 4)
    param "Modified p2 via pointer: (%d, %d)\n"
    param t37
    param t39
    t40 = call printf, 3
    i = 0
L0:
    t41 = i < 3
    if t41 == 0 goto L2
    t42 = i * 10
    t44 = i * 8
    t43 = points + t44
    *(t43 + 0) = t42
    t45 = i * 20
    t47 = i * 8
    t46 = points + t47
    *(t46 + 4) = t45
L1:
    t48 = i + 1
    i = t48
    goto L0
L2:
    i = 0
L3:
    t49 = i < 3
    if t49 == 0 goto L5
    t51 = i * 8
    t50 = points + t51
    t52 = *(t50 + 0)
    t54 = i * 8
    t53 = points + t54
    t55 = *(t53 + 4)
    param "Point[%d]: (%d, %d)\n"
    t56 = i
    param t56
    param t52
    param t55
    t57 = call printf, 4
L4:
    t58 = i + 1
    i = t58
    goto L3
L5:
    t59 = &p1
    t60 = *(t59 + 0)
    t61 = &p2
    t62 = *(t61 + 0)
    t63 = t60 < t62
    if t63 == 0 goto L6
    param "p1.x is less than p2.x\n"
    t64 = call printf, 1
L6:
    t65 = &p1
    t66 = *(t65 + 0)
    t67 = &p1
    t68 = *(t67 + 4)
    t69 = t66 + t68
    sum = t69
    t70 = &p2
    t71 = *(t70 + 0)
    t72 = &p2
    t73 = *(t72 + 4)
    t74 = t71 - t73
    diff = t74
    param "Sum of p1 coordinates: %d\n"
    t75 = sum
    param t75
    t76 = call printf, 2
    param "Difference of p2 coordinates: %d\n"
    t77 = diff
    param t77
    t78 = call printf, 2
    t79 = &s1
    *(t79 + 0) = 201
    t80 = &s1
    *(t80 + 4) = 3.8
    t81 = &s1
    *(t81 + 8) = 21
    t82 = &s2
    *(t82 + 0) = 202
    t83 = &s2
    *(t83 + 4) = 3.9
    t84 = &s2
    *(t84 + 8) = 22
    t85 = &s1
    t86 = *(t85 + 4)
    t87 = &s2
    t88 = *(t87 + 4)
    t89 = t86 < t88
    if t89 == 0 goto L7
    param "Student 2 has higher GPA\n"
    t90 = call printf, 1
    goto L8
L7:
    param "Student 1 has higher or equal GPA\n"
    t91 = call printf, 1
L8:
    return 0
func_end main

